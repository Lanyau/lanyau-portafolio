<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Ramon David P. Lanyau">
<meta name="dcterms.date" content="2025-05-27">

<title>Predicción de serie de tiempo de NDVI con ARIMA – Ramon David</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-985aa47af68dae11cd4d235c71fb941e.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-6c49c5477b92c77c9eb341f9299c235f.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-985aa47af68dae11cd4d235c71fb941e.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-01fbe853b7980beddfee3b159dd84a08.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark-08799928d293638fe9563d5c5a2794e5.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../../site_libs/bootstrap/bootstrap-01fbe853b7980beddfee3b159dd84a08.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    window.setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      window.setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    window.hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(darkModeDefault) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const darkModeDefault = false;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !window.hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
    };
    // Switch to dark mode if need be
    if (window.hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Ramon David</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Inicio</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../proyects_Blog.html"> 
<span class="menu-text">Proyectos</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">Logros</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <a href="https://www.linkedin.com/in/ramón-david-pérez-lanyau-77184920b" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-linkedin"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Predicción de serie de tiempo de NDVI con ARIMA</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Python</div>
                <div class="quarto-category">Series de tiempo</div>
                <div class="quarto-category">ARIMA</div>
                <div class="quarto-category">Google Earth Engine</div>
                <div class="quarto-category">GIS</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Ramon David P. Lanyau </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 27, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#importación-de-los-módulos-de-python-y-autenticación-en-google-earth-engine" id="toc-importación-de-los-módulos-de-python-y-autenticación-en-google-earth-engine" class="nav-link active" data-scroll-target="#importación-de-los-módulos-de-python-y-autenticación-en-google-earth-engine">Importación de los módulos de python y autenticación en Google Earth Engine</a></li>
  <li><a href="#delimitación-de-rango-de-tiempo-y-localización-en-la-que-se-extrae-la-serie-de-tiempo." id="toc-delimitación-de-rango-de-tiempo-y-localización-en-la-que-se-extrae-la-serie-de-tiempo." class="nav-link" data-scroll-target="#delimitación-de-rango-de-tiempo-y-localización-en-la-que-se-extrae-la-serie-de-tiempo.">Delimitación de rango de tiempo y localización en la que se extrae la serie de tiempo.</a></li>
  <li><a href="#creación-de-la-función-de-cálculo-de-ndvi" id="toc-creación-de-la-función-de-cálculo-de-ndvi" class="nav-link" data-scroll-target="#creación-de-la-función-de-cálculo-de-ndvi">Creación de la función de cálculo de NDVI</a></li>
  <li><a href="#extracción-de-la-serie-de-tiempo-de-ndvi" id="toc-extracción-de-la-serie-de-tiempo-de-ndvi" class="nav-link" data-scroll-target="#extracción-de-la-serie-de-tiempo-de-ndvi">Extracción de la serie de tiempo de NDVI</a></li>
  <li><a href="#visualización-de-la-serie-de-tiempo-de-ndvi" id="toc-visualización-de-la-serie-de-tiempo-de-ndvi" class="nav-link" data-scroll-target="#visualización-de-la-serie-de-tiempo-de-ndvi">Visualización de la serie de tiempo de NDVI</a></li>
  <li><a href="#limpieza-y-agregación-de-datos-en-la-serie-de-tiempo-de-ndvi" id="toc-limpieza-y-agregación-de-datos-en-la-serie-de-tiempo-de-ndvi" class="nav-link" data-scroll-target="#limpieza-y-agregación-de-datos-en-la-serie-de-tiempo-de-ndvi">Limpieza y agregación de datos en la serie de tiempo de NDVI</a></li>
  <li><a href="#visualización-de-serie-de-tiempo-con-anomalías-detectadas" id="toc-visualización-de-serie-de-tiempo-con-anomalías-detectadas" class="nav-link" data-scroll-target="#visualización-de-serie-de-tiempo-con-anomalías-detectadas">Visualización de serie de tiempo con anomalías detectadas</a></li>
  <li><a href="#predicción-de-serie-de-tiempo-para-próximos-12-meses-con-modelo-arima." id="toc-predicción-de-serie-de-tiempo-para-próximos-12-meses-con-modelo-arima." class="nav-link" data-scroll-target="#predicción-de-serie-de-tiempo-para-próximos-12-meses-con-modelo-arima.">Predicción de serie de tiempo para próximos 12 meses con modelo ARIMA.</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">






<p>En este material se explica cómo acceder a las imágenes satelitales alojadas en <strong>Google Earth Engine, una plataforma poderosa que permite el análisis geoespacial a gran escala y el procesamiento eficiente de grandes volúmenes de datos de observación de la Tierra.</strong> Se calcula el <strong>Índice Vegetal de Diferencia Normalizada (NDVI), un indicador crucial para estimar la salud vegetal</strong> en un punto específico durante el período 2013-2022. Luego realizamos análisis de <strong>detección de anomalías de esa serie de tiempo, lo cual es importante para identificar eventos inusuales o cambios significativos en la salud de la vegetación que podrían indicar estrés, enfermedad o perturbaciones.</strong> Finalmente, emplearemos un modelo ARIMA para <strong>predecir cómo será la serie de tiempo de NDVI en ese punto para los siguientes 12 meses, lo que resulta valioso para la planificación agrícola, la gestión de recursos naturales y la alerta temprana de posibles cambios en la vegetación.</strong></p>
<p>El modelo ARIMA (Autoregressive Integrated Moving Average) es un modelo estadístico utilizado para analizar y predecir series de tiempo. Se basa en la idea de que los valores futuros de una variable pueden explicarse por sus valores pasados y por los errores de predicción anteriores. El modelo ARIMA se define por tres componentes principales:</p>
<ul>
<li><p><strong>AR (Autoregresivo):</strong> Utiliza una combinación lineal de los valores pasados de la serie para predecir el valor actual. El orden de AR (p) indica cuántos valores pasados se incluyen en el modelo.</p></li>
<li><p><strong>I (Integrado):</strong> Se aplica una diferenciación a la serie de tiempo para hacerla estacionaria (es decir, con media y varianza constantes a lo largo del tiempo). El orden de integración (d) indica cuántas veces se diferencia la serie.</p></li>
<li><p><strong>MA (Promedio Móvil):</strong> Utiliza una combinación lineal de los errores de predicción pasados para predecir el valor actual. El orden de MA (q) indica cuántos errores pasados se incluyen en el modelo.</p></li>
</ul>
<p>En resumen, un modelo ARIMA(p, d, q) busca patrones en los datos históricos de una serie de tiempo para realizar pronósticos futuros, teniendo en cuenta tanto la dependencia de los valores pasados como los errores de predicción anteriores.</p>
<section id="importación-de-los-módulos-de-python-y-autenticación-en-google-earth-engine" class="level1">
<h1>Importación de los módulos de python y autenticación en Google Earth Engine</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> ee</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geemap</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Trigger the authentication flow.</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>ee.Authenticate()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>True</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize the library.</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>ee.Initialize(project<span class="op">=</span><span class="st">'hazel-env-396707'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>En este código mostraremos la media de la coleccion de imágenes Landsat (periodo 2013-2022) ‘LANDSAT/LC08/C02/T1_L2’, y la visualizaremos en color verdadero. Esta colección es la que será empleada para calcular el índice de vegetación normalizado (NDVI).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>imagen<span class="op">=</span>ee.ImageCollection(<span class="st">'LANDSAT/LC08/C02/T1_L2'</span>).filterDate(<span class="st">'2013-01-01'</span>, <span class="st">'2022-12-31'</span>).median()</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtiene los nombres de las bandas como una lista de ee.String</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>band_names_ee_list <span class="op">=</span> imagen.bandNames()</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Para mostrar los nombres de las bandas en la consola (esto se ejecutará en Python)</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>band_names <span class="op">=</span> band_names_ee_list.getInfo()</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(band_names)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['SR_B1', 'SR_B2', 'SR_B3', 'SR_B4', 'SR_B5', 'SR_B6', 'SR_B7', 'SR_QA_AEROSOL', 'ST_B10', 'ST_ATRAN', 'ST_CDIST', 'ST_DRAD', 'ST_EMIS', 'ST_EMSD', 'ST_QA', 'ST_TRAD', 'ST_URAD', 'QA_PIXEL', 'QA_RADSAT']</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the visualization parameters.</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>image_viz_params <span class="op">=</span> {</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'bands'</span>: [<span class="st">'SR_B5'</span>, <span class="st">'SR_B4'</span>, <span class="st">'SR_B3'</span>],</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'min'</span>: <span class="dv">1</span>,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'max'</span>: <span class="dv">25455</span>    ,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a map centered on San Francisco Bay.</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>map_l8 <span class="op">=</span> geemap.Map(center<span class="op">=</span>[<span class="fl">37.5010</span>, <span class="op">-</span><span class="fl">122.1899</span>], zoom<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the image layer to the map and display it.</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>map_l8.add_layer(imagen,image_viz_params, <span class="st">'falso color'</span>)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>map_l8</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">



    <meta charset="UTF-8">
    <title>My Map</title>




<!-- Load require.js. Delete this if your page already loads require.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" crossorigin="anonymous"></script>
<script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.1/dist/embed-amd.js" crossorigin="anonymous"></script>

<script type="application/vnd.jupyter.widget-state+json">
{
  "version_major": 2,
  "version_minor": 0,
  "state": {
    "9d75bb6c443a46e6b4824ad766257a4c": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "width": "500px"
      }
    },
    "b40d3d48d893486799733e5363156b2b": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "880px",
        "width": "100%"
      }
    },
    "a8ceceb8177c49bd83215b2a4ca5661c": {
      "model_name": "LeafletMapStyleModel",
      "model_module": "jupyter-leaflet",
      "model_module_version": "^0.19",
      "state": {}
    },
    "c74977a79deb4585b16664929b72874d": {
      "model_name": "LeafletMapStyleModel",
      "model_module": "jupyter-leaflet",
      "model_module_version": "^0.19",
      "state": {
        "cursor": "move"
      }
    },
    "e7471001d6054eb48534f6e776ac4d7b": {
      "model_name": "LeafletTileLayerModel",
      "model_module": "jupyter-leaflet",
      "model_module_version": "^0.19",
      "state": {
        "attribution": "&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors",
        "base": true,
        "max_zoom": 30,
        "min_zoom": 1,
        "name": "OpenStreetMap.Mapnik",
        "options": [
          "attribution",
          "bounds",
          "detect_retina",
          "max_native_zoom",
          "max_zoom",
          "min_native_zoom",
          "min_zoom",
          "no_wrap",
          "tile_size",
          "tms",
          "zoom_offset"
        ],
        "subitems": [],
        "url": "https://tile.openstreetmap.org/{z}/{x}/{y}.png"
      }
    },
    "32597caf6a4e40f39dcb5790ee3cd666": {
      "model_name": "LeafletMapStyleModel",
      "model_module": "jupyter-leaflet",
      "model_module_version": "^0.19",
      "state": {}
    },
    "ada6a18bbdef4c058db35f24a2915414": {
      "model_name": "LeafletMapModel",
      "model_module": "jupyter-leaflet",
      "model_module_version": "^0.19",
      "state": {
        "_dom_classes": [],
        "center": [
          37.501,
          -122.1899
        ],
        "controls": [
          "IPY_MODEL_0cdb342546f343bc876c4c2fdb61b7eb",
          "IPY_MODEL_11f5b23ab8ec47e0bf532132a115edb1",
          "IPY_MODEL_ccdd28bef3c0422686096a39144e3ff6",
          "IPY_MODEL_fc47a4d264ec4eda9c348150f720661a",
          "IPY_MODEL_a9caed517478440d8c520c5d4dce10da",
          "IPY_MODEL_9da497977fbe4a7da4a9839e34f4f127",
          "IPY_MODEL_d38c895c691649f28016dcf3c9452424",
          "IPY_MODEL_1714d051ed714f12897747a7bdd406ff",
          "IPY_MODEL_5280622cc3074c959d2c62f5bc7e7a9f"
        ],
        "crs": {
          "name": "EPSG3857",
          "custom": false
        },
        "default_style": "IPY_MODEL_a8ceceb8177c49bd83215b2a4ca5661c",
        "dragging_style": "IPY_MODEL_c74977a79deb4585b16664929b72874d",
        "layers": [
          "IPY_MODEL_e7471001d6054eb48534f6e776ac4d7b",
          "IPY_MODEL_685f2d1aeb9c495ea59d4f44b683cb82"
        ],
        "layout": "IPY_MODEL_b40d3d48d893486799733e5363156b2b",
        "max_zoom": 24.0,
        "options": [
          "bounce_at_zoom_limits",
          "box_zoom",
          "center",
          "close_popup_on_click",
          "double_click_zoom",
          "dragging",
          "fullscreen",
          "inertia",
          "inertia_deceleration",
          "inertia_max_speed",
          "interpolation",
          "keyboard",
          "keyboard_pan_offset",
          "keyboard_zoom_offset",
          "max_zoom",
          "min_zoom",
          "prefer_canvas",
          "scroll_wheel_zoom",
          "tap",
          "tap_tolerance",
          "touch_zoom",
          "world_copy_jump",
          "zoom",
          "zoom_animation_threshold",
          "zoom_delta",
          "zoom_snap"
        ],
        "panes": {},
        "scroll_wheel_zoom": true,
        "style": "IPY_MODEL_32597caf6a4e40f39dcb5790ee3cd666",
        "zoom": 10.0
      }
    },
    "0f12b5057097401aa1298de36b1b9096": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "28px",
        "padding": "0px 0px 0px 4px",
        "width": "28px"
      }
    },
    "2738356dd9a44e0eb055e8f13e3bb4c8": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "31f6ac1f358141739f698191724bf6b4": {
      "model_name": "ToggleButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "icon": "globe",
        "layout": "IPY_MODEL_0f12b5057097401aa1298de36b1b9096",
        "style": "IPY_MODEL_2738356dd9a44e0eb055e8f13e3bb4c8",
        "tooltip": "Search location/data"
      }
    },
    "6bc690ab747d466faf76155f22ffc3cc": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {}
    },
    "fd845b168cb5420ea5213804f1a3774e": {
      "model_name": "ToggleButtonsStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "button_width": "110px"
      }
    },
    "78bcbedd8a8d47afaa2460049efd1f1e": {
      "model_name": "ToggleButtonsModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "_options_labels": [
          "name/address",
          "lat-lon",
          "data"
        ],
        "icons": [],
        "index": 0,
        "layout": "IPY_MODEL_6bc690ab747d466faf76155f22ffc3cc",
        "style": "IPY_MODEL_fd845b168cb5420ea5213804f1a3774e",
        "tooltips": [
          "Search by place name or address",
          "Search by lat-lon coordinates",
          "Search Earth Engine data catalog"
        ]
      }
    },
    "ba0676a1a22a468d8562fbea3768247b": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "width": "340px"
      }
    },
    "47fc0b640f6a43a6b22738b10d1296f2": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "c56330d493824ce1b6885d37a6fec551": {
      "model_name": "TextModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "layout": "IPY_MODEL_ba0676a1a22a468d8562fbea3768247b",
        "placeholder": "Search by place name or address",
        "style": "IPY_MODEL_47fc0b640f6a43a6b22738b10d1296f2"
      }
    },
    "b27e5ac9241d4564b7959a9ac2c9a028": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "max_height": "350px",
        "max_width": "340px",
        "overflow": "scroll"
      }
    },
    "141e60f8eb4948009b79b385b934e8a7": {
      "model_name": "OutputModel",
      "model_module": "@jupyter-widgets/output",
      "model_module_version": "1.0.0",
      "state": {
        "_dom_classes": [],
        "layout": "IPY_MODEL_b27e5ac9241d4564b7959a9ac2c9a028",
        "outputs": []
      }
    },
    "81b7ed507ed24656aa52990dc2ddb7c1": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {}
    },
    "1bf33fb0695d441aa6311ac2fabc5e4a": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "f554383b2eaa4fa6a2895cff72567396": {
      "model_name": "RadioButtonsModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "_options_labels": [],
        "layout": "IPY_MODEL_81b7ed507ed24656aa52990dc2ddb7c1",
        "style": "IPY_MODEL_1bf33fb0695d441aa6311ac2fabc5e4a"
      }
    },
    "15fce8ebbd584152855ee5f0593e6f2f": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "max_width": "279px",
        "min_width": "279px"
      }
    },
    "a9846f13b27d450dbcdaf45182527767": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "6e810fe0cc8a4728a8828d9556dc1162": {
      "model_name": "DropdownModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "_options_labels": [],
        "layout": "IPY_MODEL_15fce8ebbd584152855ee5f0593e6f2f",
        "style": "IPY_MODEL_a9846f13b27d450dbcdaf45182527767"
      }
    },
    "5293aee360de4d478f94f766136907e9": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "max_width": "57px",
        "min_width": "57px"
      }
    },
    "e0b2877da7ec4c3e9b51cbd97f67395b": {
      "model_name": "ButtonStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "4059ef906ec14d978e0315f4b76fd037": {
      "model_name": "ButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "button_style": "primary",
        "description": "import",
        "layout": "IPY_MODEL_5293aee360de4d478f94f766136907e9",
        "style": "IPY_MODEL_e0b2877da7ec4c3e9b51cbd97f67395b",
        "tooltip": "Click to import the selected asset"
      }
    },
    "504017db4fe24ab59e4f50b3aa1b6ecb": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {}
    },
    "b70a7e7921db4792a97704748e94faa9": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "7a2a3e2336d24dc89829cc4bbf7b984f": {
      "model_name": "HTMLModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "layout": "IPY_MODEL_504017db4fe24ab59e4f50b3aa1b6ecb",
        "style": "IPY_MODEL_b70a7e7921db4792a97704748e94faa9"
      }
    },
    "256211abc450461a9481f4dd682df1e2": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {}
    },
    "f547a2e610e34ca0bafa09aa36d71d5d": {
      "model_name": "HBoxModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "children": [
          "IPY_MODEL_4059ef906ec14d978e0315f4b76fd037",
          "IPY_MODEL_6e810fe0cc8a4728a8828d9556dc1162"
        ],
        "layout": "IPY_MODEL_256211abc450461a9481f4dd682df1e2"
      }
    },
    "0d282b72a10e420480d82fc1eac5c8b9": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {}
    },
    "ef568f0820604b32a414ba09ba4d6a97": {
      "model_name": "VBoxModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "children": [
          "IPY_MODEL_78bcbedd8a8d47afaa2460049efd1f1e",
          "IPY_MODEL_c56330d493824ce1b6885d37a6fec551"
        ],
        "layout": "IPY_MODEL_0d282b72a10e420480d82fc1eac5c8b9"
      }
    },
    "1641c7711b9d44749ec0224a9f8b1ef9": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {}
    },
    "8a78802fd59a4fe1ad6070a47e60a234": {
      "model_name": "HBoxModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [
          "geemap-light"
        ],
        "children": [
          "IPY_MODEL_31f6ac1f358141739f698191724bf6b4"
        ],
        "layout": "IPY_MODEL_1641c7711b9d44749ec0224a9f8b1ef9"
      }
    },
    "c29fb4b3b14a433dab0601eaa58dca1b": {
      "model_name": "EventModel",
      "model_module": "ipyevents",
      "model_module_version": "2.0.2",
      "state": {
        "_supported_key_events": [
          "keydown",
          "keyup"
        ],
        "_supported_mouse_events": [
          "click",
          "auxclick",
          "dblclick",
          "mouseenter",
          "mouseleave",
          "mousedown",
          "mouseup",
          "mousemove",
          "wheel",
          "contextmenu",
          "dragstart",
          "drag",
          "dragend",
          "dragenter",
          "dragover",
          "dragleave",
          "drop"
        ],
        "_supported_touch_events": [
          "touchstart",
          "touchend",
          "touchmove",
          "touchcancel"
        ],
        "source": "IPY_MODEL_8a78802fd59a4fe1ad6070a47e60a234",
        "watched_events": [
          "mouseenter",
          "mouseleave"
        ],
        "xy": []
      }
    },
    "0cdb342546f343bc876c4c2fdb61b7eb": {
      "model_name": "LeafletWidgetControlModel",
      "model_module": "jupyter-leaflet",
      "model_module_version": "^0.19",
      "state": {
        "options": [
          "position",
          "transparent_bg"
        ],
        "widget": "IPY_MODEL_8a78802fd59a4fe1ad6070a47e60a234"
      }
    },
    "11f5b23ab8ec47e0bf532132a115edb1": {
      "model_name": "LeafletZoomControlModel",
      "model_module": "jupyter-leaflet",
      "model_module_version": "^0.19",
      "state": {
        "options": [
          "position",
          "zoom_in_text",
          "zoom_in_title",
          "zoom_out_text",
          "zoom_out_title"
        ]
      }
    },
    "ccdd28bef3c0422686096a39144e3ff6": {
      "model_name": "LeafletFullScreenControlModel",
      "model_module": "jupyter-leaflet",
      "model_module_version": "^0.19",
      "state": {
        "options": [
          "position"
        ]
      }
    },
    "fc47a4d264ec4eda9c348150f720661a": {
      "model_name": "LeafletDrawControlModel",
      "model_module": "jupyter-leaflet",
      "model_module_version": "^0.19",
      "state": {
        "circle": {},
        "circlemarker": {},
        "data": [],
        "marker": {
          "shapeOptions": {
            "color": "#3388ff"
          }
        },
        "options": [
          "position"
        ],
        "polygon": {
          "shapeOptions": {}
        },
        "polyline": {
          "shapeOptions": {}
        },
        "rectangle": {
          "shapeOptions": {
            "color": "#3388ff"
          }
        }
      }
    },
    "a9caed517478440d8c520c5d4dce10da": {
      "model_name": "LeafletScaleControlModel",
      "model_module": "jupyter-leaflet",
      "model_module_version": "^0.19",
      "state": {
        "options": [
          "imperial",
          "max_width",
          "metric",
          "position",
          "update_when_idle"
        ],
        "position": "bottomleft"
      }
    },
    "9da497977fbe4a7da4a9839e34f4f127": {
      "model_name": "LeafletMeasureControlModel",
      "model_module": "jupyter-leaflet",
      "model_module_version": "^0.19",
      "state": {
        "_custom_units": {},
        "active_color": "orange",
        "options": [
          "active_color",
          "capture_z_index",
          "completed_color",
          "popup_options",
          "position",
          "primary_area_unit",
          "primary_length_unit",
          "secondary_area_unit",
          "secondary_length_unit"
        ],
        "popup_options": {
          "className": "leaflet-measure-resultpopup",
          "autoPanPadding": [
            10,
            10
          ]
        },
        "position": "bottomleft",
        "primary_length_unit": "kilometers"
      }
    },
    "b7248cd2914441198f61fd68ca1781f7": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "auto",
        "padding": "0px 0px 0px 4px",
        "width": "auto"
      }
    },
    "f665d6884b4b4f0c944b8ced0eae88ec": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "7aa575fff03c43e89aaf687ec8e49fc6": {
      "model_name": "ToggleButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "button_style": "primary",
        "icon": "info",
        "layout": "IPY_MODEL_b7248cd2914441198f61fd68ca1781f7",
        "style": "IPY_MODEL_f665d6884b4b4f0c944b8ced0eae88ec",
        "tooltip": "Inspector"
      }
    },
    "0c5d14e3b0d24cd79d63ff0f8faa9618": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "auto",
        "padding": "0px 0px 0px 4px",
        "width": "auto"
      }
    },
    "6adb46a18004488999a837d05e7e798c": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "fe124c1340714e448cdf37306d440ae5": {
      "model_name": "ToggleButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "button_style": "primary",
        "icon": "bar-chart",
        "layout": "IPY_MODEL_0c5d14e3b0d24cd79d63ff0f8faa9618",
        "style": "IPY_MODEL_6adb46a18004488999a837d05e7e798c",
        "tooltip": "Plotting"
      }
    },
    "83cb469d12b7460b87fa0a970d2d8ada": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "auto",
        "padding": "0px 0px 0px 4px",
        "width": "auto"
      }
    },
    "481e1e1420d04d6fa2f917e9a804d51c": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "bd9ec8397b1647209b24d21bfa77b65f": {
      "model_name": "ToggleButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "button_style": "primary",
        "icon": "globe",
        "layout": "IPY_MODEL_83cb469d12b7460b87fa0a970d2d8ada",
        "style": "IPY_MODEL_481e1e1420d04d6fa2f917e9a804d51c",
        "tooltip": "Create timelapse"
      }
    },
    "81670f550cad4c6f983af1750f354c8a": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "auto",
        "padding": "0px 0px 0px 4px",
        "width": "auto"
      }
    },
    "a968608ee52340b3a7014517cc1cdbac": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "285ee97a0cbb469281271acf5941a492": {
      "model_name": "ToggleButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "button_style": "primary",
        "icon": "map",
        "layout": "IPY_MODEL_81670f550cad4c6f983af1750f354c8a",
        "style": "IPY_MODEL_a968608ee52340b3a7014517cc1cdbac",
        "tooltip": "Change basemap"
      }
    },
    "3e434e02d56447b083805982a4babfea": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "auto",
        "padding": "0px 0px 0px 4px",
        "width": "auto"
      }
    },
    "2e77e29f051649799937e26610521b2e": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "3a75b28dc58b49d7be6ab29ec9255be6": {
      "model_name": "ToggleButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "button_style": "primary",
        "icon": "retweet",
        "layout": "IPY_MODEL_3e434e02d56447b083805982a4babfea",
        "style": "IPY_MODEL_2e77e29f051649799937e26610521b2e",
        "tooltip": "Convert Earth Engine JavaScript to Python"
      }
    },
    "ca116613458e45fd8a9d52a0ad99df7c": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "auto",
        "padding": "0px 0px 0px 4px",
        "width": "auto"
      }
    },
    "1a18d8c67c9440cea4b066467496c6e0": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "16d666f1328e499cb9c1c340f1abf65d": {
      "model_name": "ToggleButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "button_style": "primary",
        "icon": "plus",
        "layout": "IPY_MODEL_ca116613458e45fd8a9d52a0ad99df7c",
        "style": "IPY_MODEL_1a18d8c67c9440cea4b066467496c6e0",
        "tooltip": "Expand toolbar"
      }
    },
    "ed82e7d7ab264c69a9f34fa61654bc4e": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "auto",
        "padding": "0px 0px 0px 4px",
        "width": "auto"
      }
    },
    "7637cbf748654343900b389778f335e2": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "5dafd2c63efc43058342ee6266f85b56": {
      "model_name": "ToggleButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "button_style": "primary",
        "icon": "eraser",
        "layout": "IPY_MODEL_ed82e7d7ab264c69a9f34fa61654bc4e",
        "style": "IPY_MODEL_7637cbf748654343900b389778f335e2",
        "tooltip": "Remove all drawn features"
      }
    },
    "69930260ebbd4fecbd4c64551ca58b5b": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "auto",
        "padding": "0px 0px 0px 4px",
        "width": "auto"
      }
    },
    "b538876176ac4f86bed0136aba156729": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "7228f86b55254069b8408c667e864102": {
      "model_name": "ToggleButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "button_style": "primary",
        "icon": "folder-open",
        "layout": "IPY_MODEL_69930260ebbd4fecbd4c64551ca58b5b",
        "style": "IPY_MODEL_b538876176ac4f86bed0136aba156729",
        "tooltip": "Open local vector/raster data"
      }
    },
    "75cb5200b9c04097ad69c14b8be26a3e": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "auto",
        "padding": "0px 0px 0px 4px",
        "width": "auto"
      }
    },
    "c6b06ba2584a4eb9853190f5917d2a46": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "2110f29f9f6840eaacfd5f1104755f54": {
      "model_name": "ToggleButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "button_style": "primary",
        "icon": "gears",
        "layout": "IPY_MODEL_75cb5200b9c04097ad69c14b8be26a3e",
        "style": "IPY_MODEL_c6b06ba2584a4eb9853190f5917d2a46",
        "tooltip": "WhiteboxTools for local geoprocessing"
      }
    },
    "a57af3ac4f2b46f5919e7c6f3b7f7fb9": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "auto",
        "padding": "0px 0px 0px 4px",
        "width": "auto"
      }
    },
    "96eef0d4f93845b0829019b739773853": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "a8ed56910e914fe3bfa0c1e3fc686939": {
      "model_name": "ToggleButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "button_style": "primary",
        "icon": "google",
        "layout": "IPY_MODEL_a57af3ac4f2b46f5919e7c6f3b7f7fb9",
        "style": "IPY_MODEL_96eef0d4f93845b0829019b739773853",
        "tooltip": "GEE Toolbox for cloud computing"
      }
    },
    "dd0fc0136db143609ebd6d01f74715fd": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "auto",
        "padding": "0px 0px 0px 4px",
        "width": "auto"
      }
    },
    "eb5839c38c354240a6e8d9b01886645f": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "af1c95137a2141f983b39ea9b7621569": {
      "model_name": "ToggleButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "button_style": "primary",
        "icon": "fast-forward",
        "layout": "IPY_MODEL_dd0fc0136db143609ebd6d01f74715fd",
        "style": "IPY_MODEL_eb5839c38c354240a6e8d9b01886645f",
        "tooltip": "Activate timeslider"
      }
    },
    "a1b0b75e8e8944b8bd951127534598b5": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "auto",
        "padding": "0px 0px 0px 4px",
        "width": "auto"
      }
    },
    "9598c1d07e5940a58a6de8212f118e3f": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "c173696f395847e8bd6c5d2efc81f97e": {
      "model_name": "ToggleButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "button_style": "primary",
        "icon": "hand-o-up",
        "layout": "IPY_MODEL_a1b0b75e8e8944b8bd951127534598b5",
        "style": "IPY_MODEL_9598c1d07e5940a58a6de8212f118e3f",
        "tooltip": "Collect training samples"
      }
    },
    "3ffe6b0b4bd24955b6d71e5f228c5cc3": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "auto",
        "padding": "0px 0px 0px 4px",
        "width": "auto"
      }
    },
    "16dcf2aee79f46bda5cbd69713e77723": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "80e169af01584a81aee4f01f01624554": {
      "model_name": "ToggleButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "button_style": "primary",
        "icon": "line-chart",
        "layout": "IPY_MODEL_3ffe6b0b4bd24955b6d71e5f228c5cc3",
        "style": "IPY_MODEL_16dcf2aee79f46bda5cbd69713e77723",
        "tooltip": "Creating and plotting transects"
      }
    },
    "371dec92e9ff4cd3962b30c3e5093658": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "auto",
        "padding": "0px 0px 0px 4px",
        "width": "auto"
      }
    },
    "5db26441b7c14ff2a94b0aab50196432": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "20e334bbafc24ec1869ca406e15a3b47": {
      "model_name": "ToggleButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "button_style": "primary",
        "icon": "random",
        "layout": "IPY_MODEL_371dec92e9ff4cd3962b30c3e5093658",
        "style": "IPY_MODEL_5db26441b7c14ff2a94b0aab50196432",
        "tooltip": "Sankey plots"
      }
    },
    "57b5f9cc5fe64ac2b11254053a7d3e1d": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "auto",
        "padding": "0px 0px 0px 4px",
        "width": "auto"
      }
    },
    "c5ef8c5db93c4c2895108737f44df23d": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "6b42db49a2634f6f810e988423e8106d": {
      "model_name": "ToggleButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "button_style": "primary",
        "icon": "adjust",
        "layout": "IPY_MODEL_57b5f9cc5fe64ac2b11254053a7d3e1d",
        "style": "IPY_MODEL_c5ef8c5db93c4c2895108737f44df23d",
        "tooltip": "Planet imagery"
      }
    },
    "4aeebf6b42c04983ae0a8e6f701a93e6": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "auto",
        "padding": "0px 0px 0px 4px",
        "width": "auto"
      }
    },
    "37c12994302e4255a07605ada570b8ae": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "a350f3b62b3b49b8a7fe7caf2120ad21": {
      "model_name": "ToggleButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "button_style": "primary",
        "icon": "info-circle",
        "layout": "IPY_MODEL_4aeebf6b42c04983ae0a8e6f701a93e6",
        "style": "IPY_MODEL_37c12994302e4255a07605ada570b8ae",
        "tooltip": "Get COG/STAC pixel value"
      }
    },
    "e025dd7b6279458a83041cfbf915f620": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "auto",
        "padding": "0px 0px 0px 4px",
        "width": "auto"
      }
    },
    "8a62c2997c8b4e1ab7554407920ba7e2": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "a9e73d988d57480f9db3777d5ee84109": {
      "model_name": "ToggleButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "button_style": "primary",
        "icon": "question",
        "layout": "IPY_MODEL_e025dd7b6279458a83041cfbf915f620",
        "style": "IPY_MODEL_8a62c2997c8b4e1ab7554407920ba7e2",
        "tooltip": "Get help"
      }
    },
    "8ea51a733fa845dd9ca02f549046c82c": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "grid_gap": "1px 1px",
        "grid_template_columns": "32px 32px 32px ",
        "grid_template_rows": "32px 32px ",
        "padding": "5px",
        "width": "109px"
      }
    },
    "c41fb1370f7a4955bff8c0766808c46e": {
      "model_name": "GridBoxModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "children": [
          "IPY_MODEL_7aa575fff03c43e89aaf687ec8e49fc6",
          "IPY_MODEL_fe124c1340714e448cdf37306d440ae5",
          "IPY_MODEL_bd9ec8397b1647209b24d21bfa77b65f",
          "IPY_MODEL_285ee97a0cbb469281271acf5941a492",
          "IPY_MODEL_3a75b28dc58b49d7be6ab29ec9255be6",
          "IPY_MODEL_16d666f1328e499cb9c1c340f1abf65d"
        ],
        "layout": "IPY_MODEL_8ea51a733fa845dd9ca02f549046c82c"
      }
    },
    "e69f10ab98924fb5b9361128ea0e8f7e": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "28px",
        "padding": "0px 0px 0px 4px",
        "width": "28px"
      }
    },
    "a69f9583d5274710b512880a01e51b68": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "544779b9430448c0a97591ef820d643c": {
      "model_name": "ToggleButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "icon": "wrench",
        "layout": "IPY_MODEL_e69f10ab98924fb5b9361128ea0e8f7e",
        "style": "IPY_MODEL_a69f9583d5274710b512880a01e51b68",
        "tooltip": "Toolbar"
      }
    },
    "ef798f2acfbf4fabbc08536119469d0b": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "28px",
        "width": "72px"
      }
    },
    "b58cee3feeee4ab3a96be972ade7cd25": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "c4aaa6b3a28048f497520c3b9407e673": {
      "model_name": "ToggleButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "icon": "server",
        "layout": "IPY_MODEL_ef798f2acfbf4fabbc08536119469d0b",
        "style": "IPY_MODEL_b58cee3feeee4ab3a96be972ade7cd25",
        "tooltip": "Layers",
        "value": true
      }
    },
    "ba624ca4f2aa40ddab0e6b16f1c3c65c": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "align_items": "center",
        "display": "flex",
        "justify_content": "flex-end"
      }
    },
    "bd25d64671c548c88fadf314ed05702e": {
      "model_name": "HBoxModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "children": [
          "IPY_MODEL_c4aaa6b3a28048f497520c3b9407e673",
          "IPY_MODEL_544779b9430448c0a97591ef820d643c"
        ],
        "layout": "IPY_MODEL_ba624ca4f2aa40ddab0e6b16f1c3c65c"
      }
    },
    "e47dd83d1f3146b4996feef98d7c1fdc": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {}
    },
    "0e7d82dc58fb41a3a634cb1362f5a92e": {
      "model_name": "VBoxModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "children": [
          "IPY_MODEL_9311c2392add4f5580843f5222190c75"
        ],
        "layout": "IPY_MODEL_e47dd83d1f3146b4996feef98d7c1fdc"
      }
    },
    "fff23f5096d5481ca2a80774afee0cdd": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {}
    },
    "3b8b2104635843e6ae7e517202fa600f": {
      "model_name": "VBoxModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [
          "geemap-light"
        ],
        "children": [
          "IPY_MODEL_bd25d64671c548c88fadf314ed05702e",
          "IPY_MODEL_0e7d82dc58fb41a3a634cb1362f5a92e"
        ],
        "layout": "IPY_MODEL_fff23f5096d5481ca2a80774afee0cdd"
      }
    },
    "d38c895c691649f28016dcf3c9452424": {
      "model_name": "LeafletWidgetControlModel",
      "model_module": "jupyter-leaflet",
      "model_module_version": "^0.19",
      "state": {
        "options": [
          "position",
          "transparent_bg"
        ],
        "position": "topright",
        "widget": "IPY_MODEL_3b8b2104635843e6ae7e517202fa600f"
      }
    },
    "3565af0e377744e49857e29f0433f63f": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "28px",
        "padding": "0px 0px 0px 4px",
        "width": "28px"
      }
    },
    "44721aa24b634e06ae596ca9ef5bea32": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "9c1c3436b4aa42fa9a7c762a71a42db0": {
      "model_name": "ToggleButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "icon": "server",
        "layout": "IPY_MODEL_3565af0e377744e49857e29f0433f63f",
        "style": "IPY_MODEL_44721aa24b634e06ae596ca9ef5bea32",
        "tooltip": "Layer Manager",
        "value": true
      }
    },
    "e1fa7e7d9d45466cab39885f29a470b8": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "28px",
        "padding": "0px",
        "width": "28px"
      }
    },
    "8cd08be1e52d439bbff05204ef189f08": {
      "model_name": "ButtonStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "89ab06c01a5041b99d09217e5093f878": {
      "model_name": "ButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "button_style": "primary",
        "icon": "times",
        "layout": "IPY_MODEL_e1fa7e7d9d45466cab39885f29a470b8",
        "style": "IPY_MODEL_8cd08be1e52d439bbff05204ef189f08",
        "tooltip": "Close the tool"
      }
    },
    "f191376d79c2437dab8febed25b04610": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "display": "none"
      }
    },
    "e320ba062640436cb1840290d9b9ff14": {
      "model_name": "HBoxModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "children": [
          "IPY_MODEL_89ab06c01a5041b99d09217e5093f878",
          "IPY_MODEL_9c1c3436b4aa42fa9a7c762a71a42db0"
        ],
        "layout": "IPY_MODEL_f191376d79c2437dab8febed25b04610"
      }
    },
    "394b4987787944acbb37730ab09e26bb": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {}
    },
    "48b983372c6c408683957951574eb7ee": {
      "model_name": "VBoxModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "children": [
          "IPY_MODEL_acb77c1d051f4769aa2e3ae95910be8d",
          "IPY_MODEL_46ca1fc225c242d7a4d758541a4f929c",
          "IPY_MODEL_2b98b34bfce045a4b933a1be350b52e6"
        ],
        "layout": "IPY_MODEL_394b4987787944acbb37730ab09e26bb"
      }
    },
    "a69e89fb170944adb683a2dbfa7d58f1": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "18px",
        "padding": "0px 4px 25px 4px",
        "width": "30ex"
      }
    },
    "6482fb0d59c94c2bb866eff00687fabe": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "ef3cd44abb7043a0bb3b715003e4119b": {
      "model_name": "CheckboxModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "description": "All layers on/off",
        "indent": false,
        "layout": "IPY_MODEL_a69e89fb170944adb683a2dbfa7d58f1",
        "style": "IPY_MODEL_6482fb0d59c94c2bb866eff00687fabe"
      }
    },
    "5972a65ff887410bbc982d9eec11cb06": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "18px",
        "width": "140px"
      }
    },
    "7ddf3d7829744415bceba7c491a43c0e": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "bf0c598c1a93492aa972068fec963a58": {
      "model_name": "CheckboxModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "description": "OpenStreetMap.Mapnik",
        "indent": false,
        "layout": "IPY_MODEL_5972a65ff887410bbc982d9eec11cb06",
        "style": "IPY_MODEL_7ddf3d7829744415bceba7c491a43c0e",
        "value": true
      }
    },
    "b50c90fe0c0d4af39c5c7319fbbd53a1": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "padding": "0px 3px 0px 0px",
        "width": "70px"
      }
    },
    "d8e8825ba5274d57b1ea6e8ce500dd43": {
      "model_name": "SliderStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "19680bc0934048e88d596fe28f286fb6": {
      "model_name": "FloatSliderModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "layout": "IPY_MODEL_b50c90fe0c0d4af39c5c7319fbbd53a1",
        "max": 1.0,
        "readout": false,
        "step": 0.01,
        "style": "IPY_MODEL_d8e8825ba5274d57b1ea6e8ce500dd43",
        "value": 1.0
      }
    },
    "583baac0372f49328e8cf192df8cff80": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "25px",
        "padding": "0px",
        "width": "25px"
      }
    },
    "8bc00da33a6b4f9a9cd9bca3270d0d11": {
      "model_name": "ButtonStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "83eb50ef46ec45de8ba612ceb7d5e559": {
      "model_name": "ButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "icon": "gear",
        "layout": "IPY_MODEL_583baac0372f49328e8cf192df8cff80",
        "style": "IPY_MODEL_8bc00da33a6b4f9a9cd9bca3270d0d11",
        "tooltip": "OpenStreetMap.Mapnik"
      }
    },
    "38ef73c871f84a04968537b45e3faf53": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "25px",
        "padding": "0px",
        "width": "25px"
      }
    },
    "9d31621b594f4b5a98249ab293c58851": {
      "model_name": "ButtonStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "aab606b68dc04d788f5851790ab76abe": {
      "model_name": "ButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "icon": "times",
        "layout": "IPY_MODEL_38ef73c871f84a04968537b45e3faf53",
        "style": "IPY_MODEL_9d31621b594f4b5a98249ab293c58851",
        "tooltip": "Loaded"
      }
    },
    "348194c01035465396878ada48f8494c": {
      "model_name": "EventModel",
      "model_module": "ipyevents",
      "model_module_version": "2.0.2",
      "state": {
        "_supported_key_events": [
          "keydown",
          "keyup"
        ],
        "_supported_mouse_events": [
          "click",
          "auxclick",
          "dblclick",
          "mouseenter",
          "mouseleave",
          "mousedown",
          "mouseup",
          "mousemove",
          "wheel",
          "contextmenu",
          "dragstart",
          "drag",
          "dragend",
          "dragenter",
          "dragover",
          "dragleave",
          "drop"
        ],
        "_supported_touch_events": [
          "touchstart",
          "touchend",
          "touchmove",
          "touchcancel"
        ],
        "source": "IPY_MODEL_aab606b68dc04d788f5851790ab76abe",
        "watched_events": [
          "mouseenter",
          "mouseleave"
        ],
        "xy": []
      }
    },
    "36e813574939488f9c726e8bdcce724b": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "padding": "0px 4px 0px 4px"
      }
    },
    "2e89a5bfe8b941c98d6877a96e4a77f2": {
      "model_name": "HBoxModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "children": [
          "IPY_MODEL_bf0c598c1a93492aa972068fec963a58",
          "IPY_MODEL_19680bc0934048e88d596fe28f286fb6",
          "IPY_MODEL_83eb50ef46ec45de8ba612ceb7d5e559",
          "IPY_MODEL_aab606b68dc04d788f5851790ab76abe"
        ],
        "layout": "IPY_MODEL_36e813574939488f9c726e8bdcce724b"
      }
    },
    "2b4a033c5c054bc3a2691b838089b836": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {}
    },
    "9311c2392add4f5580843f5222190c75": {
      "model_name": "VBoxModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [
          "geemap-light"
        ],
        "children": [
          "IPY_MODEL_e320ba062640436cb1840290d9b9ff14",
          "IPY_MODEL_48b983372c6c408683957951574eb7ee"
        ],
        "layout": "IPY_MODEL_2b4a033c5c054bc3a2691b838089b836"
      }
    },
    "1714d051ed714f12897747a7bdd406ff": {
      "model_name": "LeafletAttributionControlModel",
      "model_module": "jupyter-leaflet",
      "model_module_version": "^0.19",
      "state": {
        "options": [
          "position",
          "prefix"
        ],
        "position": "bottomright"
      }
    },
    "685f2d1aeb9c495ea59d4f44b683cb82": {
      "model_name": "LeafletTileLayerModel",
      "model_module": "jupyter-leaflet",
      "model_module_version": "^0.19",
      "state": {
        "attribution": "Google Earth Engine",
        "max_zoom": 24,
        "name": "falso color",
        "options": [
          "attribution",
          "bounds",
          "detect_retina",
          "max_native_zoom",
          "max_zoom",
          "min_native_zoom",
          "min_zoom",
          "no_wrap",
          "tile_size",
          "tms",
          "zoom_offset"
        ],
        "subitems": [],
        "url": "https://earthengine.googleapis.com/v1/projects/hazel-env-396707/maps/30874743ddc6896af211089ae4391c2c-af05c5d08f0ab4c9513db4befb4bae28/tiles/{z}/{x}/{y}"
      }
    },
    "4dcda83b4c0541bb83a03566ea8fe993": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "18px",
        "padding": "0px 4px 25px 4px",
        "width": "30ex"
      }
    },
    "47ff2391e1bd412e84560df450767145": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "acb77c1d051f4769aa2e3ae95910be8d": {
      "model_name": "CheckboxModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "description": "All layers on/off",
        "indent": false,
        "layout": "IPY_MODEL_4dcda83b4c0541bb83a03566ea8fe993",
        "style": "IPY_MODEL_47ff2391e1bd412e84560df450767145"
      }
    },
    "7abc004b77e3495bb399c08781e69d79": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "18px",
        "width": "140px"
      }
    },
    "42d58facf5544eba8452654950404ad9": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "75d00c3569ad408398e5729aca06b781": {
      "model_name": "CheckboxModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "description": "OpenStreetMap.Mapnik",
        "indent": false,
        "layout": "IPY_MODEL_7abc004b77e3495bb399c08781e69d79",
        "style": "IPY_MODEL_42d58facf5544eba8452654950404ad9",
        "value": true
      }
    },
    "e7554110c8a744c58305cc059e68a7be": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "padding": "0px 3px 0px 0px",
        "width": "70px"
      }
    },
    "922e1a8da674400c91e77fe7430b8521": {
      "model_name": "SliderStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "b635c19dc7a2485598216a00b468fa8f": {
      "model_name": "FloatSliderModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "layout": "IPY_MODEL_e7554110c8a744c58305cc059e68a7be",
        "max": 1.0,
        "readout": false,
        "step": 0.01,
        "style": "IPY_MODEL_922e1a8da674400c91e77fe7430b8521",
        "value": 1.0
      }
    },
    "ba041b18fac84fedbc263a9a27ed92da": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "25px",
        "padding": "0px",
        "width": "25px"
      }
    },
    "383da71c618a429db4769baf67655da9": {
      "model_name": "ButtonStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "f95fda2a4c424f6bbda8d7977e1396f0": {
      "model_name": "ButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "icon": "gear",
        "layout": "IPY_MODEL_ba041b18fac84fedbc263a9a27ed92da",
        "style": "IPY_MODEL_383da71c618a429db4769baf67655da9",
        "tooltip": "OpenStreetMap.Mapnik"
      }
    },
    "fe6ecd09c9d741a6ab72b34cf07e0167": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "25px",
        "padding": "0px",
        "width": "25px"
      }
    },
    "af06326de0ca4d64bbb1ecaf05ca89ed": {
      "model_name": "ButtonStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "c86d42e8109543ee91eaa21094ce428d": {
      "model_name": "ButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "icon": "times",
        "layout": "IPY_MODEL_fe6ecd09c9d741a6ab72b34cf07e0167",
        "style": "IPY_MODEL_af06326de0ca4d64bbb1ecaf05ca89ed",
        "tooltip": "Loaded"
      }
    },
    "b2ee146e08d0402190aa3f5bd9334c94": {
      "model_name": "EventModel",
      "model_module": "ipyevents",
      "model_module_version": "2.0.2",
      "state": {
        "_supported_key_events": [
          "keydown",
          "keyup"
        ],
        "_supported_mouse_events": [
          "click",
          "auxclick",
          "dblclick",
          "mouseenter",
          "mouseleave",
          "mousedown",
          "mouseup",
          "mousemove",
          "wheel",
          "contextmenu",
          "dragstart",
          "drag",
          "dragend",
          "dragenter",
          "dragover",
          "dragleave",
          "drop"
        ],
        "_supported_touch_events": [
          "touchstart",
          "touchend",
          "touchmove",
          "touchcancel"
        ],
        "source": "IPY_MODEL_c86d42e8109543ee91eaa21094ce428d",
        "watched_events": [
          "mouseenter",
          "mouseleave"
        ],
        "xy": []
      }
    },
    "6a8f9bb8a2a64c58974bd69a535889b5": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "padding": "0px 4px 0px 4px"
      }
    },
    "46ca1fc225c242d7a4d758541a4f929c": {
      "model_name": "HBoxModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "children": [
          "IPY_MODEL_75d00c3569ad408398e5729aca06b781",
          "IPY_MODEL_b635c19dc7a2485598216a00b468fa8f",
          "IPY_MODEL_f95fda2a4c424f6bbda8d7977e1396f0",
          "IPY_MODEL_c86d42e8109543ee91eaa21094ce428d"
        ],
        "layout": "IPY_MODEL_6a8f9bb8a2a64c58974bd69a535889b5"
      }
    },
    "0c674de95434483c80fe721bd1cfe5ee": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "18px",
        "width": "140px"
      }
    },
    "1240f37f41af4398895f35c95f927b6f": {
      "model_name": "DescriptionStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "75e12ad7c17a4a2381c4c4eb9e56d077": {
      "model_name": "CheckboxModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "description": "falso color",
        "indent": false,
        "layout": "IPY_MODEL_0c674de95434483c80fe721bd1cfe5ee",
        "style": "IPY_MODEL_1240f37f41af4398895f35c95f927b6f",
        "value": true
      }
    },
    "26865134ca0c45b4a80fd3458e7fdcf9": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "padding": "0px 3px 0px 0px",
        "width": "70px"
      }
    },
    "453b82096eef45049db90948f41e3555": {
      "model_name": "SliderStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "02c1c277d16e4ac09954e92ffba64771": {
      "model_name": "FloatSliderModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "layout": "IPY_MODEL_26865134ca0c45b4a80fd3458e7fdcf9",
        "max": 1.0,
        "readout": false,
        "step": 0.01,
        "style": "IPY_MODEL_453b82096eef45049db90948f41e3555",
        "value": 1.0
      }
    },
    "c045936e4f01419286eb65b74a5db976": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "25px",
        "padding": "0px",
        "width": "25px"
      }
    },
    "5e6f8e990b0544338f29ccc2f5bd56bf": {
      "model_name": "ButtonStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "2eb4685182534a2c8805d0826c6e76f3": {
      "model_name": "ButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "icon": "gear",
        "layout": "IPY_MODEL_c045936e4f01419286eb65b74a5db976",
        "style": "IPY_MODEL_5e6f8e990b0544338f29ccc2f5bd56bf",
        "tooltip": "falso color"
      }
    },
    "9cce071ebe9445d7b00e20e2314e55b4": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "height": "25px",
        "padding": "0px",
        "width": "25px"
      }
    },
    "12fc627cc99740ddb107ae1040a19f63": {
      "model_name": "ButtonStyleModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {}
    },
    "d48aa85696d240208a448db9dfa06e89": {
      "model_name": "ButtonModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "icon": "times",
        "layout": "IPY_MODEL_9cce071ebe9445d7b00e20e2314e55b4",
        "style": "IPY_MODEL_12fc627cc99740ddb107ae1040a19f63",
        "tooltip": "Loaded"
      }
    },
    "15be9f73eca443d083bcb0f90224fe3b": {
      "model_name": "EventModel",
      "model_module": "ipyevents",
      "model_module_version": "2.0.2",
      "state": {
        "_supported_key_events": [
          "keydown",
          "keyup"
        ],
        "_supported_mouse_events": [
          "click",
          "auxclick",
          "dblclick",
          "mouseenter",
          "mouseleave",
          "mousedown",
          "mouseup",
          "mousemove",
          "wheel",
          "contextmenu",
          "dragstart",
          "drag",
          "dragend",
          "dragenter",
          "dragover",
          "dragleave",
          "drop"
        ],
        "_supported_touch_events": [
          "touchstart",
          "touchend",
          "touchmove",
          "touchcancel"
        ],
        "source": "IPY_MODEL_d48aa85696d240208a448db9dfa06e89",
        "watched_events": [
          "mouseenter",
          "mouseleave"
        ],
        "xy": []
      }
    },
    "11e26e6317eb4dc8a43a326c9df49888": {
      "model_name": "LayoutModel",
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "1.2.0",
      "state": {
        "padding": "0px 4px 0px 4px"
      }
    },
    "2b98b34bfce045a4b933a1be350b52e6": {
      "model_name": "HBoxModel",
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "1.5.0",
      "state": {
        "_dom_classes": [],
        "children": [
          "IPY_MODEL_75e12ad7c17a4a2381c4c4eb9e56d077",
          "IPY_MODEL_02c1c277d16e4ac09954e92ffba64771",
          "IPY_MODEL_2eb4685182534a2c8805d0826c6e76f3",
          "IPY_MODEL_d48aa85696d240208a448db9dfa06e89"
        ],
        "layout": "IPY_MODEL_11e26e6317eb4dc8a43a326c9df49888"
      }
    },
    "5280622cc3074c959d2c62f5bc7e7a9f": {
      "model_name": "LeafletLayersControlModel",
      "model_module": "jupyter-leaflet",
      "model_module_version": "^0.19",
      "state": {
        "options": [
          "collapsed",
          "position"
        ],
        "position": "topright"
      }
    }
  }
}
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"version_major": 2, "version_minor": 0, "model_id": "ada6a18bbdef4c058db35f24a2915414"}
</script>




</div>
</div>
</section>
<section id="delimitación-de-rango-de-tiempo-y-localización-en-la-que-se-extrae-la-serie-de-tiempo." class="level1">
<h1>Delimitación de rango de tiempo y localización en la que se extrae la serie de tiempo.</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the satellite imagery dataset (e.g., Landsat 8)</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>dataset <span class="op">=</span> ee.ImageCollection(<span class="st">'LANDSAT/LC08/C02/T1_L2'</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the location of interest (e.g., a point or a polygon)</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>location <span class="op">=</span> ee.Geometry.Point([<span class="op">-</span><span class="fl">122.084051</span>, <span class="fl">37.385348</span>])  <span class="co"># Mountain View, CA</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter the dataset by location and date range</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>filtered_dataset <span class="op">=</span> dataset.filterBounds(location).filterDate(<span class="st">'2013-01-01'</span>, <span class="st">'2022-12-31'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="creación-de-la-función-de-cálculo-de-ndvi" class="level1">
<h1>Creación de la función de cálculo de NDVI</h1>
<p>Esta función de NDVI creada será iterada con la función map en cada imagen de la colección de imágenes Landsat. El NDVI será calculado a partir de la diferencia de la Banda 5 (región del infrarojo cercano) - Banda 4 (Región del rojo)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a function to calculate NDVI</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_ndvi(image):</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    ndvi <span class="op">=</span> image.normalizedDifference([<span class="st">'SR_B5'</span>, <span class="st">'SR_B4'</span>]).rename(<span class="st">'NDVI'</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> image.addBands(ndvi)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Map the NDVI calculation function over the filtered dataset</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>ndvi_dataset <span class="op">=</span> filtered_dataset.<span class="bu">map</span>(calculate_ndvi)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the visualization parameters.</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>viz <span class="op">=</span> {</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'bands'</span>: [<span class="st">'NDVI'</span>],</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">'min'</span>: <span class="dv">0</span>,</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">'max'</span>: <span class="fl">0.25</span>,</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="extracción-de-la-serie-de-tiempo-de-ndvi" class="level1">
<h1>Extracción de la serie de tiempo de NDVI</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the time series data for the location</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>time_series_data <span class="op">=</span> ndvi_dataset.getRegion(location, <span class="dv">30</span>).getInfo()</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the time property separately and format it</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>time_values <span class="op">=</span> [item[<span class="dv">0</span>] <span class="cf">for</span> item <span class="kw">in</span> time_series_data[<span class="dv">1</span>:]]</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>time_values <span class="op">=</span> pd.to_datetime([item.split(<span class="st">'_'</span>)[<span class="op">-</span><span class="dv">1</span>] <span class="cf">for</span> item <span class="kw">in</span> time_values], <span class="bu">format</span><span class="op">=</span><span class="st">'%Y%m</span><span class="sc">%d</span><span class="st">'</span>)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a pandas DataFrame from the time series data (excluding time)</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame([item[<span class="dv">1</span>:] <span class="cf">for</span> item <span class="kw">in</span> time_series_data[<span class="dv">1</span>:]], columns<span class="op">=</span>time_series_data[<span class="dv">0</span>][<span class="dv">1</span>:])</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'time'</span>] <span class="op">=</span> time_values</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="visualización-de-la-serie-de-tiempo-de-ndvi" class="level1">
<h1>Visualización de la serie de tiempo de NDVI</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the NDVI values over time</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>))</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>plt.plot(df[<span class="st">'time'</span>], df[<span class="st">'NDVI'</span>])</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Time'</span>)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'NDVI'</span>)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'NDVI Serie de tiempo'</span>)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="arima_python_files/figure-html/siete-1.png" class="img-fluid figure-img" width="1152"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="limpieza-y-agregación-de-datos-en-la-serie-de-tiempo-de-ndvi" class="level1">
<h1>Limpieza y agregación de datos en la serie de tiempo de NDVI</h1>
<p>En este bloque de código , establecemos a la columa ‘Date’ como el índice del DataFrame. Se imputan los datos faltantes (Nan) con la media de toda la serie de tiempo. Y por último se agrega la serie de tiempo a media mensual, estableciendo como fecha de referencia la última fecha de cada mes (‘ME’: Month End).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>ndvi_series <span class="op">=</span> df[[<span class="st">'time'</span>, <span class="st">'NDVI'</span>]].rename(columns<span class="op">=</span>{<span class="st">'time'</span>: <span class="st">'Date'</span>}).set_index(<span class="st">'Date'</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>ndvi_series <span class="op">=</span> ndvi_series.fillna(ndvi_series.mean())</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Resample the data to monthly frequency</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>ndvi_series <span class="op">=</span> ndvi_series.resample(<span class="st">'ME'</span>).mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>En este código se realiza la descomposición de la serie de tiempo en sus componentes, tendencia, estacionalidad y residuo, con el método aditivo. Lo que permitirá una mejor visualización de las características de esta serie de tiempo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Seasonal Decompose</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>ndvi_series_filled <span class="op">=</span> ndvi_series.fillna(ndvi_series[<span class="st">'NDVI'</span>].mean())</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>decomposition <span class="op">=</span> sm.tsa.seasonal_decompose(ndvi_series_filled[<span class="st">'NDVI'</span>], model<span class="op">=</span><span class="st">'additive'</span>)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>decomposition.plot()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="arima_python_files/figure-html/nueve-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Este código toma una serie de tiempo de NDVI, ajusta un modelo ARIMA(5, 1, 0) a estos datos, pronostica los valores de NDVI para los próximos 12 períodos y luego imprime tanto los valores pronosticados como un resumen estadístico del modelo ajustado.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply ARIMA for forecasting</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>arima_model <span class="op">=</span> sm.tsa.ARIMA(ndvi_series[<span class="st">'NDVI'</span>], order<span class="op">=</span>(<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">0</span>))</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>arima_result <span class="op">=</span> arima_model.fit()</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Forecast the next 12 months</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>forecast <span class="op">=</span> arima_result.forecast(steps<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(forecast)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2023-01-31    0.090206
2023-02-28    0.093894
2023-03-31    0.088436
2023-04-30    0.093845
2023-05-31    0.101646
2023-06-30    0.091173
2023-07-31    0.093757
2023-08-31    0.095121
2023-09-30    0.092268
2023-10-31    0.092873
2023-11-30    0.094984
2023-12-31    0.093331
Freq: ME, Name: predicted_mean, dtype: float64</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print ARIMA model statistics</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arima_result.summary())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                               SARIMAX Results                                
==============================================================================
Dep. Variable:                   NDVI   No. Observations:                  117
Model:                 ARIMA(5, 1, 0)   Log Likelihood                 203.961
Date:              mar., 27 may. 2025   AIC                           -395.922
Time:                        12:31:58   BIC                           -379.401
Sample:                    04-30-2013   HQIC                          -389.216
                         - 12-31-2022                                         
Covariance Type:                  opg                                         
==============================================================================
                 coef    std err          z      P&gt;|z|      [0.025      0.975]
------------------------------------------------------------------------------
ar.L1         -0.4438      0.091     -4.873      0.000      -0.622      -0.265
ar.L2         -0.2303      0.122     -1.891      0.059      -0.469       0.008
ar.L3         -0.0402      0.123     -0.328      0.743      -0.280       0.200
ar.L4         -0.1265      0.114     -1.109      0.268      -0.350       0.097
ar.L5         -0.2009      0.101     -1.983      0.047      -0.400      -0.002
sigma2         0.0017      0.000      6.767      0.000       0.001       0.002
===================================================================================
Ljung-Box (L1) (Q):                   0.17   Jarque-Bera (JB):                 0.90
Prob(Q):                              0.68   Prob(JB):                         0.64
Heteroskedasticity (H):               0.66   Skew:                            -0.20
Prob(H) (two-sided):                  0.21   Kurtosis:                         2.84
===================================================================================

Warnings:
[1] Covariance matrix calculated using the outer product of gradients (complex-step).</code></pre>
</div>
</div>
<p>Detección de Anomalías en Serie de Tiempo NDVI con Isolation Forest. Este código utiliza la técnica de Isolation Forest para identificar anomalías (valores atípicos) en una serie de tiempo de NDVI. Primero, se imputan los valores faltantes (NaN) en la columna ‘NDVI’ de la serie ndvi_series utilizando la media. Luego, se entrena un modelo de Isolation Forest con una tasa de contaminación del 10% para detectar las anomalías. Finalmente, se imprimen los valores considerados como anomalías y se genera un gráfico de la serie de tiempo con las anomalías resaltadas en rojo.</p>
</section>
<section id="visualización-de-serie-de-tiempo-con-anomalías-detectadas" class="level1">
<h1>Visualización de serie de tiempo con anomalías detectadas</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> IsolationForest</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.impute <span class="im">import</span> SimpleImputer</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear un imputador para reemplazar NaN con la media</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>imputer <span class="op">=</span> SimpleImputer(strategy<span class="op">=</span><span class="st">'mean'</span>)</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Aplicar la imputación a la columna 'NDVI'</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>ndvi_values_imputed <span class="op">=</span> imputer.fit_transform(ndvi_series[<span class="st">'NDVI'</span>].values.reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>))</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Aplicar Isolation Forest para detección de anomalías</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> ndvi_values_imputed</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> IsolationForest(contamination<span class="op">=</span><span class="fl">0.1</span>)</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>model.fit(X)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<style>#sk-container-id-1 {
  /* Definition of color scheme common for light and dark mode */
  --sklearn-color-text: black;
  --sklearn-color-line: gray;
  /* Definition of color scheme for unfitted estimators */
  --sklearn-color-unfitted-level-0: #fff5e6;
  --sklearn-color-unfitted-level-1: #f6e4d2;
  --sklearn-color-unfitted-level-2: #ffe0b3;
  --sklearn-color-unfitted-level-3: chocolate;
  /* Definition of color scheme for fitted estimators */
  --sklearn-color-fitted-level-0: #f0f8ff;
  --sklearn-color-fitted-level-1: #d4ebff;
  --sklearn-color-fitted-level-2: #b3dbfd;
  --sklearn-color-fitted-level-3: cornflowerblue;

  /* Specific color for light theme */
  --sklearn-color-text-on-default-background: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, black)));
  --sklearn-color-background: var(--sg-background-color, var(--theme-background, var(--jp-layout-color0, white)));
  --sklearn-color-border-box: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, black)));
  --sklearn-color-icon: #696969;

  @media (prefers-color-scheme: dark) {
    /* Redefinition of color scheme for dark theme */
    --sklearn-color-text-on-default-background: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, white)));
    --sklearn-color-background: var(--sg-background-color, var(--theme-background, var(--jp-layout-color0, #111)));
    --sklearn-color-border-box: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, white)));
    --sklearn-color-icon: #878787;
  }
}

#sk-container-id-1 {
  color: var(--sklearn-color-text);
}

#sk-container-id-1 pre {
  padding: 0;
}

#sk-container-id-1 input.sk-hidden--visually {
  border: 0;
  clip: rect(1px 1px 1px 1px);
  clip: rect(1px, 1px, 1px, 1px);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

#sk-container-id-1 div.sk-dashed-wrapped {
  border: 1px dashed var(--sklearn-color-line);
  margin: 0 0.4em 0.5em 0.4em;
  box-sizing: border-box;
  padding-bottom: 0.4em;
  background-color: var(--sklearn-color-background);
}

#sk-container-id-1 div.sk-container {
  /* jupyter's `normalize.less` sets `[hidden] { display: none; }`
     but bootstrap.min.css set `[hidden] { display: none !important; }`
     so we also need the `!important` here to be able to override the
     default hidden behavior on the sphinx rendered scikit-learn.org.
     See: https://github.com/scikit-learn/scikit-learn/issues/21755 */
  display: inline-block !important;
  position: relative;
}

#sk-container-id-1 div.sk-text-repr-fallback {
  display: none;
}

div.sk-parallel-item,
div.sk-serial,
div.sk-item {
  /* draw centered vertical line to link estimators */
  background-image: linear-gradient(var(--sklearn-color-text-on-default-background), var(--sklearn-color-text-on-default-background));
  background-size: 2px 100%;
  background-repeat: no-repeat;
  background-position: center center;
}

/* Parallel-specific style estimator block */

#sk-container-id-1 div.sk-parallel-item::after {
  content: "";
  width: 100%;
  border-bottom: 2px solid var(--sklearn-color-text-on-default-background);
  flex-grow: 1;
}

#sk-container-id-1 div.sk-parallel {
  display: flex;
  align-items: stretch;
  justify-content: center;
  background-color: var(--sklearn-color-background);
  position: relative;
}

#sk-container-id-1 div.sk-parallel-item {
  display: flex;
  flex-direction: column;
}

#sk-container-id-1 div.sk-parallel-item:first-child::after {
  align-self: flex-end;
  width: 50%;
}

#sk-container-id-1 div.sk-parallel-item:last-child::after {
  align-self: flex-start;
  width: 50%;
}

#sk-container-id-1 div.sk-parallel-item:only-child::after {
  width: 0;
}

/* Serial-specific style estimator block */

#sk-container-id-1 div.sk-serial {
  display: flex;
  flex-direction: column;
  align-items: center;
  background-color: var(--sklearn-color-background);
  padding-right: 1em;
  padding-left: 1em;
}


/* Toggleable style: style used for estimator/Pipeline/ColumnTransformer box that is
clickable and can be expanded/collapsed.
- Pipeline and ColumnTransformer use this feature and define the default style
- Estimators will overwrite some part of the style using the `sk-estimator` class
*/

/* Pipeline and ColumnTransformer style (default) */

#sk-container-id-1 div.sk-toggleable {
  /* Default theme specific background. It is overwritten whether we have a
  specific estimator or a Pipeline/ColumnTransformer */
  background-color: var(--sklearn-color-background);
}

/* Toggleable label */
#sk-container-id-1 label.sk-toggleable__label {
  cursor: pointer;
  display: block;
  width: 100%;
  margin-bottom: 0;
  padding: 0.5em;
  box-sizing: border-box;
  text-align: center;
}

#sk-container-id-1 label.sk-toggleable__label-arrow:before {
  /* Arrow on the left of the label */
  content: "▸";
  float: left;
  margin-right: 0.25em;
  color: var(--sklearn-color-icon);
}

#sk-container-id-1 label.sk-toggleable__label-arrow:hover:before {
  color: var(--sklearn-color-text);
}

/* Toggleable content - dropdown */

#sk-container-id-1 div.sk-toggleable__content {
  max-height: 0;
  max-width: 0;
  overflow: hidden;
  text-align: left;
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-0);
}

#sk-container-id-1 div.sk-toggleable__content.fitted {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-0);
}

#sk-container-id-1 div.sk-toggleable__content pre {
  margin: 0.2em;
  border-radius: 0.25em;
  color: var(--sklearn-color-text);
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-0);
}

#sk-container-id-1 div.sk-toggleable__content.fitted pre {
  /* unfitted */
  background-color: var(--sklearn-color-fitted-level-0);
}

#sk-container-id-1 input.sk-toggleable__control:checked~div.sk-toggleable__content {
  /* Expand drop-down */
  max-height: 200px;
  max-width: 100%;
  overflow: auto;
}

#sk-container-id-1 input.sk-toggleable__control:checked~label.sk-toggleable__label-arrow:before {
  content: "▾";
}

/* Pipeline/ColumnTransformer-specific style */

#sk-container-id-1 div.sk-label input.sk-toggleable__control:checked~label.sk-toggleable__label {
  color: var(--sklearn-color-text);
  background-color: var(--sklearn-color-unfitted-level-2);
}

#sk-container-id-1 div.sk-label.fitted input.sk-toggleable__control:checked~label.sk-toggleable__label {
  background-color: var(--sklearn-color-fitted-level-2);
}

/* Estimator-specific style */

/* Colorize estimator box */
#sk-container-id-1 div.sk-estimator input.sk-toggleable__control:checked~label.sk-toggleable__label {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-2);
}

#sk-container-id-1 div.sk-estimator.fitted input.sk-toggleable__control:checked~label.sk-toggleable__label {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-2);
}

#sk-container-id-1 div.sk-label label.sk-toggleable__label,
#sk-container-id-1 div.sk-label label {
  /* The background is the default theme color */
  color: var(--sklearn-color-text-on-default-background);
}

/* On hover, darken the color of the background */
#sk-container-id-1 div.sk-label:hover label.sk-toggleable__label {
  color: var(--sklearn-color-text);
  background-color: var(--sklearn-color-unfitted-level-2);
}

/* Label box, darken color on hover, fitted */
#sk-container-id-1 div.sk-label.fitted:hover label.sk-toggleable__label.fitted {
  color: var(--sklearn-color-text);
  background-color: var(--sklearn-color-fitted-level-2);
}

/* Estimator label */

#sk-container-id-1 div.sk-label label {
  font-family: monospace;
  font-weight: bold;
  display: inline-block;
  line-height: 1.2em;
}

#sk-container-id-1 div.sk-label-container {
  text-align: center;
}

/* Estimator-specific */
#sk-container-id-1 div.sk-estimator {
  font-family: monospace;
  border: 1px dotted var(--sklearn-color-border-box);
  border-radius: 0.25em;
  box-sizing: border-box;
  margin-bottom: 0.5em;
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-0);
}

#sk-container-id-1 div.sk-estimator.fitted {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-0);
}

/* on hover */
#sk-container-id-1 div.sk-estimator:hover {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-2);
}

#sk-container-id-1 div.sk-estimator.fitted:hover {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-2);
}

/* Specification for estimator info (e.g. "i" and "?") */

/* Common style for "i" and "?" */

.sk-estimator-doc-link,
a:link.sk-estimator-doc-link,
a:visited.sk-estimator-doc-link {
  float: right;
  font-size: smaller;
  line-height: 1em;
  font-family: monospace;
  background-color: var(--sklearn-color-background);
  border-radius: 1em;
  height: 1em;
  width: 1em;
  text-decoration: none !important;
  margin-left: 1ex;
  /* unfitted */
  border: var(--sklearn-color-unfitted-level-1) 1pt solid;
  color: var(--sklearn-color-unfitted-level-1);
}

.sk-estimator-doc-link.fitted,
a:link.sk-estimator-doc-link.fitted,
a:visited.sk-estimator-doc-link.fitted {
  /* fitted */
  border: var(--sklearn-color-fitted-level-1) 1pt solid;
  color: var(--sklearn-color-fitted-level-1);
}

/* On hover */
div.sk-estimator:hover .sk-estimator-doc-link:hover,
.sk-estimator-doc-link:hover,
div.sk-label-container:hover .sk-estimator-doc-link:hover,
.sk-estimator-doc-link:hover {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-3);
  color: var(--sklearn-color-background);
  text-decoration: none;
}

div.sk-estimator.fitted:hover .sk-estimator-doc-link.fitted:hover,
.sk-estimator-doc-link.fitted:hover,
div.sk-label-container:hover .sk-estimator-doc-link.fitted:hover,
.sk-estimator-doc-link.fitted:hover {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-3);
  color: var(--sklearn-color-background);
  text-decoration: none;
}

/* Span, style for the box shown on hovering the info icon */
.sk-estimator-doc-link span {
  display: none;
  z-index: 9999;
  position: relative;
  font-weight: normal;
  right: .2ex;
  padding: .5ex;
  margin: .5ex;
  width: min-content;
  min-width: 20ex;
  max-width: 50ex;
  color: var(--sklearn-color-text);
  box-shadow: 2pt 2pt 4pt #999;
  /* unfitted */
  background: var(--sklearn-color-unfitted-level-0);
  border: .5pt solid var(--sklearn-color-unfitted-level-3);
}

.sk-estimator-doc-link.fitted span {
  /* fitted */
  background: var(--sklearn-color-fitted-level-0);
  border: var(--sklearn-color-fitted-level-3);
}

.sk-estimator-doc-link:hover span {
  display: block;
}

/* "?"-specific style due to the `<a>` HTML tag */

#sk-container-id-1 a.estimator_doc_link {
  float: right;
  font-size: 1rem;
  line-height: 1em;
  font-family: monospace;
  background-color: var(--sklearn-color-background);
  border-radius: 1rem;
  height: 1rem;
  width: 1rem;
  text-decoration: none;
  /* unfitted */
  color: var(--sklearn-color-unfitted-level-1);
  border: var(--sklearn-color-unfitted-level-1) 1pt solid;
}

#sk-container-id-1 a.estimator_doc_link.fitted {
  /* fitted */
  border: var(--sklearn-color-fitted-level-1) 1pt solid;
  color: var(--sklearn-color-fitted-level-1);
}

/* On hover */
#sk-container-id-1 a.estimator_doc_link:hover {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-3);
  color: var(--sklearn-color-background);
  text-decoration: none;
}

#sk-container-id-1 a.estimator_doc_link.fitted:hover {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-3);
}
</style><div id="sk-container-id-1" class="sk-top-container"><div class="sk-text-repr-fallback"><pre>IsolationForest(contamination=0.1)</pre><b>In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. <br>On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.</b></div><div class="sk-container" hidden=""><div class="sk-item"><div class="sk-estimator fitted sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-1" type="checkbox" checked=""><label for="sk-estimator-id-1" class="sk-toggleable__label fitted sk-toggleable__label-arrow fitted">&nbsp;&nbsp;IsolationForest<a class="sk-estimator-doc-link fitted" rel="noreferrer" target="_blank" href="https://scikit-learn.org/1.4/modules/generated/sklearn.ensemble.IsolationForest.html">?<span>Documentation for IsolationForest</span></a><span class="sk-estimator-doc-link fitted">i<span>Fitted</span></span></label><div class="sk-toggleable__content fitted"><pre>IsolationForest(contamination=0.1)</pre></div> </div></div></div></div>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>anomalies <span class="op">=</span> model.predict(X)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Detectar anomalías (outliers)</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>outliers <span class="op">=</span> X[anomalies <span class="op">==</span> <span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(outliers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[ 0.00795261]
 [ 0.03819191]
 [ 0.02326098]
 [ 0.00233433]
 [ 0.04438574]
 [ 0.16662213]
 [ 0.17310808]
 [-0.00244651]
 [ 0.00589421]
 [ 0.16030437]
 [ 0.16349427]
 [ 0.16698799]]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the data con anomalías resaltadas</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>plt.plot(ndvi_series.index, ndvi_values_imputed, label<span class="op">=</span><span class="st">'NDVI real'</span>)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>plt.scatter(ndvi_series.index[anomalies <span class="op">==</span> <span class="op">-</span><span class="dv">1</span>], outliers, color<span class="op">=</span><span class="st">'red'</span>, label<span class="op">=</span><span class="st">'Anomalías'</span>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Detección de anomalías usando el método de Isolation Forest'</span>) </span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Time'</span>)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'NDVI'</span>)</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="arima_python_files/figure-html/once-5.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="predicción-de-serie-de-tiempo-para-próximos-12-meses-con-modelo-arima." class="level1">
<h1>Predicción de serie de tiempo para próximos 12 meses con modelo ARIMA.</h1>
<p>El código toma una serie de tiempo de NDVI, previamente procesada para imputar valores faltantes. Utiliza la función <code>auto_arima</code> de la biblioteca <code>pmdarima</code> para encontrar automáticamente el mejor modelo ARIMA que se ajuste a los datos, considerando la posible estacionalidad con un período de 12 (asumiendo datos mensuales). Una vez que el modelo óptimo es identificado y ajustado, se utiliza para predecir los valores de NDVI para los próximos 12 períodos futuros. Finalmente, el código genera un gráfico que muestra la serie de tiempo real junto con los valores predichos para los siguientes 12 meses, facilitando la visualización del pronóstico.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pmdarima <span class="im">as</span> pm</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># Asegúrate de que pandas esté importado si aún no lo está</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt <span class="co"># Asegúrate de que matplotlib esté importado</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Asumiendo que 'ndvi_values_imputed' fue creado en el chunk anterior</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co"># y contiene la serie 'NDVI' con los NaN imputados con la media</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Auto ARIMA model</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>auto_arima_model <span class="op">=</span> pm.auto_arima(ndvi_values_imputed, seasonal<span class="op">=</span><span class="va">True</span>, m<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Forecast future values</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>forecast <span class="op">=</span> auto_arima_model.predict(n_periods<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>forecast_dates <span class="op">=</span> [ndvi_series.index[<span class="op">-</span><span class="dv">1</span>] <span class="op">+</span> pd.DateOffset(months<span class="op">=</span>i) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">13</span>)]</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the forecasted values</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>plt.plot(ndvi_series.index, ndvi_values_imputed, label<span class="op">=</span><span class="st">'NDVI real'</span>)</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>plt.plot(forecast_dates, forecast, label<span class="op">=</span><span class="st">'Predicción'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, marker<span class="op">=</span><span class="st">'o'</span>)</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Predicción del NDVI'</span>)</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Date'</span>)</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'NDVI'</span>)</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="arima_python_files/figure-html/doce-7.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    window.setColorSchemeToggle(window.hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>